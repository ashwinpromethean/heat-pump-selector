version: 1.0
runtime: python311

# No package installs in build for Python 3.11 revised build
build:
  commands:
    build:
      - echo "Build step (no pip here for py311 revised build)"

run:
  runtime-version: 3.11
  pre-run:
    - pip3 install --upgrade pip
    - pip3 install -r requirements.txt
    # Optional: quick sanity check
    - python3 -c "import flask, sys; print('Flask OK', flask.__version__, sys.executable)"
  command: python3 flask_app.py
  network:
    port: 8080
  env:
    - name: ADMIN_EMAIL
      value: "admin@prometheanenergy.com"
    - name: ADMIN_PASSWORD
      value: "Promethean@123"
    - name: VIEWER_EMAIL
      value: "common@prometheanenergy.com"
    - name: VIEWER_PASSWORD
      value: "viewer_password"
    - name: COOKIE_NAME
      value: "modelpicker_auth"
    - name: COOKIE_KEY
      value: "long-random-secret-key-for-production-change-this"
    - name: COOKIE_EXPIRY_DAYS
      value: "7"
    - name: DATA_PATH
      value: "data/models.xlsx"
